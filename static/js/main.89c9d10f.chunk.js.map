{"version":3,"sources":["components/Navbar/Navbar.module.css","redux/dialogs-reducer.ts","api/api.js","components/News/News.module.css","components/Music/Music.module.css","components/Settings/Settings.module.css","assets/img/3.gif","components/common/Preloader/Preloader.module.css","assets/img/logo192.png","components/Users/Users.module.css","components/Navbar/Navbar.jsx","components/News/News.jsx","components/Music/Music.jsx","components/Settings/Settings.jsx","redux/auth-reducer.ts","components/Login/Login.jsx","utils/objects-helper.js","redux/users-reducer.ts","components/common/Paginator/Paginator.jsx","components/Users/User.jsx","components/Users/Users.jsx","redux/users-selectors.js","components/Users/UsersContainer.jsx","components/Header/Header.jsx","components/Header/HeaderContainer.jsx","redux/app-reducer.ts","redux/navbar-reducer.ts","redux/redux-store.js","hoc/WithSuspense.js","App.js","serviceWorker.js","index.js","components/common/FormsContols/FormsControls.js","components/common/Preloader/Preloader.jsx","components/common/Paginator/Paginator.module.css","components/Header/Header.module.css","components/common/FormsContols/FormsControls.module.css","utils/validators/validators.js","components/Login/Login.module.css","assets/img/userphoto.png","redux/profile-reducer.ts"],"names":["module","exports","initialState","dialogs","id","name","messages","message","messageMe","addMessageActionCreator","newMessageBody","type","dialogsReducer","state","action","newMessage","length","instance","axios","withCredentials","baseURL","headers","usersApi","getUsers","currentPage","pageSize","get","then","response","data","follow","userId","post","unfollow","delete","getProfile","console","warn","profileApi","getStatus","updateStatus","status","put","savePhoto","photoFile","formData","FormData","append","saveProfile","authApi","me","login","email","password","rememberMe","captcha","logout","securityApi","getCaptchaUrl","Navbar","props","className","s","navbar","menu","item","active","to","activeClassName","News","news","Music","music","Settings","settings","isAuth","captchaUrl","setAuthUserData","payload","getCaptchaUrlSuccess","getAuthUserData","dispatch","a","resultCode","url","authReducer","LoginReduxForm","reduxForm","form","onSubmitSuccess","result","reset","handleSubmit","error","onSubmit","loginForm","createField","required","Input","Field","component","src","alt","style","formSummeryError","connect","auth","stopSubmit","_error","updateObjectsInArray","items","itemId","objPropName","newObjProps","map","u","users","totalUsersCount","isFetching","followingInProgress","followSuccess","unfollowSuccess","setCurrentPage","toggleIsFetching","toggleFollowingProgress","followUnfollowFlow","apiMethod","actionCreator","usersReducer","followed","totalCount","filter","Paginator","totalItemsCount","onPageChanged","portionSize","pagesCount","Math","ceil","pages","i","push","portionCount","useState","portionNumber","setPortionNumber","leftPortionPageNumber","rightPortionNumber","paginator","begEnd","onClick","p","cn","selectedPage","pageNumber","key","e","User","user","userItem","ava","photos","small","userPhoto","disabled","some","userInfo","fullName","location","city","Users","usersPage","getPageSize","getTotalUsersCount","getCurrentPage","getIsFetching","getFollowingInProgress","UsersContainer","requestUsers","this","Preloader","React","Component","compose","bind","page","Header","header","logo","loginBlock","loginBtn","HeaderContainer","initialized","appReducer","navbarReducer","reducers","combineReducers","profilePage","profileReducer","dialogsPage","app","formReducer","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","store","createStore","applyMiddleware","thunkMiddleware","__store__","WithSuspense","fallback","DialogsContainer","lazy","ProfileContainer","App","catchAllUnhandleErrors","promiseRejectionEvent","promise","alert","initializeApp","addEventListener","removeEventListener","exact","path","render","AppContainer","withRouter","Promise","all","MainApp","Boolean","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","FormControl","input","meta","touched","children","hasError","formControl","Textarea","restProps","placeholder","validators","validate","preloader","value","maxLengthCreator","maxLength","posts","likesCounts","profile","newPostText","addPostActionCreator","setStatus","getUserProfile","file","large","getState","contact","slice","indexOf","toLocaleLowerCase","reject","newPost","postId"],"mappings":"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","file":"static/js/main.89c9d10f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"navbar\":\"Navbar_navbar__1nmOh\",\"menu\":\"Navbar_menu__1Mjeq\",\"item\":\"Navbar_item__3kfkC\",\"active\":\"Navbar_active__2cyM1\"};","const SEND_MESSAGE = 'SEND_MESSAGE';\r\n\r\ntype  DialogType = {\r\n\tid: number,\r\n\tname: string\r\n}\r\ntype  MessageType = {\r\n\tid: number,\r\n\tmessage: string\r\n\tmessageMe: string\r\n}\r\n\r\nlet initialState = {\r\n\tdialogs: [\r\n\t\t{id: 1, name: 'Vasya'},\r\n\t\t{id: 2, name: 'Petya'},\r\n\t\t{id: 3, name: 'Ignat'},\r\n\t\t{id: 4, name: 'Alex'},\r\n\t\t{id: 5, name: 'Sveta'},\r\n\t\t{id: 6, name: 'Valera'},\r\n\t] as Array<DialogType>,\r\n\tmessages: [\r\n\t\t{id: 1, message: 'Hi!'},\r\n\t\t{id: 2, message: 'How are you?'},\r\n\t\t{id: 3, message: 'Yo', messageMe: 'Hi! I\\'m fine!'},\r\n\t\t{id: 4, messageMe: 'How are you? Text Text Text Text Text Text Text Text'},\r\n\t\t{id: 5, message: 'Fine!', messageMe: 'It\\'s good!'},\r\n\t] as Array<MessageType>\r\n};\r\n\r\nexport type  InitialStateType = typeof initialState\r\n\r\nconst dialogsReducer = (state = initialState, action: any): InitialStateType => {\r\n\t\r\n\tswitch (action.type) {\r\n\t\tcase SEND_MESSAGE:\r\n\t\t\tlet newMessage = {\r\n\t\t\t\tid: state.messages[state.messages.length - 1].id + 1,\r\n\t\t\t\tmessageMe: action.newMessageBody\r\n\t\t\t};\r\n\t\t\treturn <InitialStateType>{\r\n\t\t\t\t...state,\r\n\t\t\t\tmessages: [...state.messages, newMessage]\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n\r\ntype  addMessageActionCreatorType = {\r\n\ttype: typeof SEND_MESSAGE,\r\n\tnewMessageBody: string\r\n}\r\n\r\nexport const addMessageActionCreator = (newMessageBody: string): addMessageActionCreatorType => ({type:SEND_MESSAGE, newMessageBody});\r\n\r\nexport default dialogsReducer;","import * as axios from \"axios\";\r\n\r\nconst instance = axios.create({\r\n\twithCredentials: true,\r\n\tbaseURL: 'https://social-network.samuraijs.com/api/1.0',\r\n\theaders: {\"API-KEY\": \"8a6ad4af-f25c-4576-91b8-981c838cf476\"},\r\n});\r\n\r\nexport const usersApi = {\r\n\tgetUsers(currentPage = 1, pageSize = 10) {\r\n\t\treturn instance.get(`/users?page=${currentPage}&count=${pageSize}`)\r\n\t\t.then(response => response.data); // => {return response.data}\r\n\t},\r\n\tfollow(userId) {\r\n\t\treturn instance.post(`follow/${userId}`)\r\n\t\t.then(response => response.data)\r\n\t},\r\n\tunfollow(userId) {\r\n\t\treturn instance.delete(`follow/${userId}`)\r\n\t\t.then(response => response.data)\r\n\t},\r\n\tgetProfile(userId) {\r\n\t\tconsole.warn('Obsolete method. Please used profile obj.');\r\n\t\treturn profileApi.getProfile(userId);\r\n\t}\r\n};\r\n\r\nexport const profileApi = {\r\n\tgetProfile(userId) {\r\n\t\treturn instance.get(`profile/`+ userId)\r\n\t\t.then (response => response.data)\r\n\t},\r\n\tgetStatus(userId) {\r\n\t\treturn instance.get(`profile/status/`+ userId)\r\n\t},\r\n\tupdateStatus(status) {\r\n\t\treturn instance.put(`profile/status/`, {status: status})   // отправляет объект со свойством status\r\n\t},\r\n\tsavePhoto(photoFile) {\r\n\t\tconst formData = new FormData();\r\n\t\tformData.append(\"image\", photoFile);\r\n\t\treturn instance.put (`profile/photo`,formData, {\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'multipart/form-data'\r\n\t\t\t}\r\n\t\t})\r\n\t},\r\n\tsaveProfile(photoFile) {\r\n\t\treturn instance.put(`profile`, photoFile)\r\n\t}\r\n};\r\n\r\nexport const authApi = {\r\n\tme(){\r\n\t\treturn instance.get(`auth/me`);\r\n\t},\r\n\tlogin(email, password, rememberMe = false, captcha = null) {\r\n\t\treturn instance.post(`auth/login`, {email, password, rememberMe, captcha})\r\n\t},\r\n\tlogout() {\r\n\t\treturn instance.delete(`auth/login`)\r\n\t},\r\n};\r\n\r\nexport const securityApi = {\r\n\tgetCaptchaUrl(){\r\n\t\treturn instance.get(`security/get-captcha-url`);\r\n\t},\r\n};\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"news\":\"News_news__2Gd__\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"music\":\"Music_music__2zUz2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"settings\":\"Settings_settings__2xCJD\"};","module.exports = \"data:image/gif;base64,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\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"preloader\":\"Preloader_preloader__yOn_r\"};","module.exports = __webpack_public_path__ + \"static/media/logo192.6e7af814.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"usersPage\":\"Users_usersPage__jAE_m\",\"userItem\":\"Users_userItem__BBKXY\",\"user\":\"Users_user__2TriJ\",\"ava\":\"Users_ava__1utAn\",\"userInfo\":\"Users_userInfo__2vaqv\",\"name\":\"Users_name__3q30K\",\"fullName\":\"Users_fullName__11yoG\",\"status\":\"Users_status__3-p7F\",\"location\":\"Users_location__2b0Zi\",\"city\":\"Users_city__2jlBy\"};","import React from \"react\";\r\nimport s from \"./Navbar.module.css\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport MyFriends from \"./MyFriends/MyFriends\";\r\n\r\nfunction Navbar(props) {\r\n\t\r\n\treturn (\r\n\t\t<div className={s.navbar}>\r\n\t\t\t<div className={s.menu}>\r\n\t\t\t\t<div className={`${s.item} ${s.active}`}>\r\n\t\t\t\t\t<NavLink to='/profile' activeClassName={s.active}>Profile</NavLink>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={s.item}>\r\n\t\t\t\t\t<NavLink to='/dialogs' activeClassName={s.active}>Messages</NavLink>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={s.item}>\r\n\t\t\t\t\t<NavLink to='/users' activeClassName={s.active}>Users</NavLink>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={s.item}>\r\n\t\t\t\t\t<NavLink to='/news' activeClassName={s.active}>News</NavLink>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={s.item}>\r\n\t\t\t\t\t<NavLink to='/music' activeClassName={s.active}>Music</NavLink>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={s.item}>\r\n\t\t\t\t\t<NavLink to='/settings' activeClassName={s.active}>Settings</NavLink>\r\n\t\t\t\t</div>\r\n\t\t\t\t{/*<div className={s.item}>*/}\r\n\t\t\t\t{/*\t<MyFriends friends={props.state.friends} />*/}\r\n\t\t\t\t{/*</div>*/}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Navbar;","import React from \"react\";\r\nimport s from \"./News.module.css\";\r\n\r\n\r\nfunction News() {\r\n\treturn (\r\n\t\t<div className={s.news}>\r\n\t\t\tNews\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n\r\nexport default News;","import React from \"react\";\r\nimport s from \"./Music.module.css\";\r\n\r\n\r\nfunction Music() {\r\n\treturn (\r\n\t\t<div className={s.music}>\r\n\t\t\tMusic\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n\r\nexport default Music;","import React from \"react\";\r\nimport s from \"./Settings.module.css\";\r\n\r\n\r\nfunction Settings() {\r\n\treturn (\r\n\t\t<div className={s.settings}>\r\n\t\t\tSettings\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n\r\nexport default Settings;","import {securityApi as securityApi, authApi as authApi} from \"../api/api\";\r\nimport {stopSubmit} from \"redux-form\";\r\n\r\nconst SET_USER_DATA = 'auth/SET_USER_DATA';\r\nconst GET_CAPTCHA_URL_SUCCESS = 'auth/GET_CAPTCHA_URL_SUCCESS';\r\n\r\nexport type InitialStateType2 ={\r\n\tid: number | null,\r\n\temail: string | null,\r\n\tlogin: string | null,\r\n\tisAuth: boolean,\r\n\tcaptchaUrl: string | null\r\n};\r\n\r\nlet initialState = {\r\n\tid: null as number | null,\r\n\temail: null as string |null,\r\n\tlogin: null as string |null,\r\n\tisAuth: false,\r\n\tcaptchaUrl: null as string | null\r\n};\r\nexport type InitialStateType = typeof initialState;\r\n\r\nconst authReducer = (state = initialState, action: any): InitialStateType => {\r\n\tswitch (action.type) {\r\n\t\tcase SET_USER_DATA:\r\n\t\tcase GET_CAPTCHA_URL_SUCCESS:\r\n\t\t\treturn  {\r\n\t\t\t\t...state,\r\n\t\t\t\t...action.payload\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n\r\ntype SetAuthUserDataActionPayloadType = {\r\n\tuserId: number | null,\r\n\temail: string | null,\r\n\tlogin: string | null,\r\n\tisAuth: boolean\r\n}\r\ntype SetAuthUserDataActionType ={\r\n\ttype: typeof SET_USER_DATA,\r\n\tpayload: SetAuthUserDataActionPayloadType\r\n}\r\n\r\nexport const setAuthUserData = (userId: number | null, email: string| null, login: string| null, isAuth:boolean): SetAuthUserDataActionType => ({\r\n\ttype: SET_USER_DATA, payload: {userId, email, login, isAuth}});\r\n\r\ntype GetCaptchaUrlSuccessActionType = {\r\n\ttype: typeof GET_CAPTCHA_URL_SUCCESS,\r\n\tpayload: { captchaUrl: string }\r\n}\r\n\r\nexport const getCaptchaUrlSuccess = (captchaUrl:string): GetCaptchaUrlSuccessActionType => ({\r\n\ttype: GET_CAPTCHA_URL_SUCCESS, payload: {captchaUrl}});\r\n\r\nexport const getAuthUserData = () => async (dispatch: any) => {\r\n\tlet response = await authApi.me();\r\n\t\r\n\tif (response.data.resultCode === 0) {\r\n\t\tlet {id, login, email} = response.data.data;\r\n\t\tdispatch(setAuthUserData(id, email, login, true));\r\n\t}\r\n};\r\n\r\nexport const login = (email: string, password: string, rememberMe:boolean, captcha: string) => async (dispatch: any) => {\r\n\tlet response = await authApi.login(email, password, rememberMe, captcha);\r\n\t\r\n\tif (response.data.resultCode === 0) {\r\n\t\tdispatch(getAuthUserData());\r\n\t} else {\r\n\t\tif (response.data.resultCode === 10) {\r\n\t\t\tdispatch(getCaptchaUrl());\r\n\t\t}\r\n\t\tlet message = response.data.messages.length > 0 ? response.data.messages[0] : \"Some error\";\r\n\t\tdispatch(stopSubmit(\"login\", {_error: message}));\r\n\t}\r\n};\r\n\r\nexport const getCaptchaUrl = () => async (dispatch: any) => {\r\n\tconst response = await securityApi.getCaptchaUrl();\r\n\tconst captchaUrl = response.data.url;\r\n\tdispatch(getCaptchaUrlSuccess(captchaUrl));\r\n};\r\n\r\nexport const logout = () => async (dispatch: any) => {\r\n\tlet response = await authApi.logout();\r\n\t\r\n\tif (response.data.resultCode === 0) {\r\n\t\tdispatch(setAuthUserData(null, null, null, false));\r\n\t}\r\n};\r\n\r\n\r\nexport default authReducer;","import React from \"react\";\r\nimport s from \"./Login.module.css\"\r\nimport style from \"../common/FormsContols/FormsControls.module.css\"\r\nimport {Field, reduxForm, reset} from \"redux-form\";\r\nimport {createField, Input} from \"../common/FormsContols/FormsControls\";\r\nimport {required} from \"../../utils/validators/validators\";\r\nimport {connect} from \"react-redux\";\r\nimport {login} from \"../../redux/auth-reducer\";\r\nimport {Redirect} from \"react-router-dom\";\r\n\r\nconst LoginForm = ({handleSubmit, error, captchaUrl}) => {\r\n\treturn (\r\n\t  <form onSubmit={handleSubmit}>\r\n\t\t  <div className={s.loginForm}>\r\n\t\t\t  {createField(\"Email\", \"email\", [required], Input)}\r\n\t\t\t  {createField(\"Password\", \"password\", [required], Input, \"password\")}\r\n\t\t\t  <div>\r\n\t\t\t\t  <Field component={\"input\"} name={\"rememberMe\"} type={\"checkbox\"} /> Remember me\r\n\t\t\t  </div>\r\n\t\t\t  \r\n\t\t\t  {captchaUrl && <div>\r\n\t\t\t\t  <img src={captchaUrl} alt=\"captcha\"/>\r\n\t\t\t\t  {createField(\"Symbols from image\", \"captcha\", [required], Input)}\r\n\t\t\t  </div>}\r\n\t\t\t  { error && <div className={style.formSummeryError}>\r\n\t\t\t\t {error}\r\n\t\t\t  </div> }\r\n\t\t\t  <div>\r\n\t\t\t\t  <button>Sign Up</button>\r\n\t\t\t  </div>\r\n\t\t  </div>\r\n\t  </form>\r\n\t)\r\n};\r\n\r\nconst afterSubmit = (result, dispatch) =>\r\n  dispatch(reset('login'));\r\n\r\nconst LoginReduxForm = reduxForm ({form: 'login', onSubmitSuccess: afterSubmit}) (LoginForm);\r\n\r\nconst Login = (props) => {\r\n\tconst onSubmit = (formData) => {\r\n\t\tprops.login(formData.email, formData.password, formData.rememberMe, formData.captcha);\r\n\t};\r\n\t\r\n\tif(props.isAuth) {\r\n\t\treturn <Redirect to={\"/profile\"} />\r\n\t}\r\n\treturn (\r\n\t  <div className={s.login}>\r\n\t\t  <h2>Login</h2>\r\n\t\t \t<LoginReduxForm onSubmit={onSubmit} captchaUrl={props.captchaUrl} />\r\n\t  </div>\r\n\t)\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tisAuth: state.auth.isAuth,\r\n\tcaptchaUrl: state.auth.captchaUrl\r\n\t\r\n});\r\n\r\nexport default connect (mapStateToProps, {login}) (Login);","\r\n\r\nexport const updateObjectsInArray = (items, itemId, objPropName, newObjProps) => {\r\n\treturn items.map( u => {\r\n\t\tif (u[objPropName] === itemId) {\r\n\t\t\treturn {...u, ...newObjProps}\r\n\t\t}\r\n\t\treturn u;\r\n\t})\r\n};","import {usersApi} from \"../api/api\";\r\nimport {updateObjectsInArray} from \"../utils/objects-helper\";\r\nimport {UsersType} from \"../Types/types\";\r\n\r\nconst FOLLOW = 'FOLLOW';\r\nconst UNFOLLOW = 'UNFOLLOW';\r\nconst SET_USERS = 'SET_USERS';\r\nconst SET_CURRENT_PAGE = 'SET_CURRENT_PAGE';\r\nconst SET_TOTAL_USERS_COUNT = 'SET_TOTAL_USERS_COUNT';\r\nconst TOGGLE_IS_FETCHING = 'TOGGLE_IS_FETCHING';\r\nconst TOGGLE_IS_FOLLOWING_PROGRESS = 'TOGGLE_IS_FOLLOWING_PROGRESS';\r\n\r\n\r\nlet initialState = {\r\n\tusers: [] as Array<UsersType>,\r\n\tpageSize: 10,\r\n\ttotalUsersCount: 0,\r\n\tcurrentPage: 1,\r\n\tisFetching: true,\r\n\tfollowingInProgress: [] as Array<number> //array of users ids\r\n};\r\n\r\ntype InitialStateType = typeof initialState\r\n\r\nconst usersReducer = (state = initialState, action: any): InitialStateType => {\r\n\tswitch (action.type) {\r\n\t\tcase FOLLOW:\r\n\t\t\treturn  {\r\n\t\t\t\t...state,\r\n\t\t\t\tusers: updateObjectsInArray(state.users, action.userId, \"id\", {followed: true} )\r\n\t\t\t};\r\n\t\tcase UNFOLLOW:\r\n\t\t\treturn  {\r\n\t\t\t\t...state,\r\n\t\t\t\tusers: updateObjectsInArray(state.users, action.userId, \"id\", {followed: false} )\r\n\t\t\t};\r\n\t\tcase SET_USERS: {\r\n\t\t\treturn  {...state, users: action.users} //склеиваем 2 массива\r\n\t\t}\r\n\t\tcase SET_CURRENT_PAGE: {\r\n\t\t\treturn  {...state, currentPage: action.currentPage}\r\n\t\t}\r\n\t\tcase SET_TOTAL_USERS_COUNT: {\r\n\t\t\treturn  {...state, totalUsersCount: action.totalCount}\r\n\t\t}\r\n\t\tcase TOGGLE_IS_FETCHING: {\r\n\t\t\treturn  {...state, isFetching: action.isFetching}\r\n\t\t}\r\n\t\tcase TOGGLE_IS_FOLLOWING_PROGRESS: {\r\n\t\t\tdebugger;\r\n\t\t\treturn  {\r\n\t\t\t\t...state,\r\n\t\t\t\tfollowingInProgress: action.isFetching\r\n\t\t\t\t  ? [...state.followingInProgress, action.userId]\r\n\t\t\t\t  : state.followingInProgress.filter(id => id !== action.userId)\r\n\t\t\t}\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n\r\ntype FollowSuccessActionType = {\r\n\ttype: typeof FOLLOW,\r\n\tuserId: number\r\n}\r\nexport const followSuccess = (userId: number):FollowSuccessActionType => ({type: FOLLOW, userId});\r\n\r\ntype UnfollowSuccessActionType = {\r\n\ttype: typeof UNFOLLOW,\r\n\tuserId: number\r\n}\r\nexport const unfollowSuccess = (userId: number):UnfollowSuccessActionType => ({type: UNFOLLOW, userId});\r\n\r\ntype SetUsersActionType = {\r\n\ttype: typeof SET_USERS,\r\n\tusers: Array<UsersType>\r\n}\r\nexport const setUsers = (users: Array<UsersType>):SetUsersActionType => ({type: SET_USERS, users});\r\n\r\ntype SetCurrentPageActionType = {\r\n\ttype: typeof SET_CURRENT_PAGE,\r\n\tcurrentPage: number\r\n}\r\nexport const setCurrentPage = (currentPage: number):SetCurrentPageActionType => ({type: SET_CURRENT_PAGE, currentPage});\r\n\r\ntype SetTotalUsersCountActionType = {\r\n\ttype: typeof SET_TOTAL_USERS_COUNT,\r\n\ttotalCount: number\r\n}\r\nexport const setTotalUsersCount = (totalCount: number):SetTotalUsersCountActionType => ({type: SET_TOTAL_USERS_COUNT, totalCount});\r\n\r\ntype ToggleIsFetchingActionType = {\r\n\ttype: typeof TOGGLE_IS_FETCHING,\r\n\tisFetching: boolean\r\n}\r\nexport const toggleIsFetching = (isFetching: boolean):ToggleIsFetchingActionType => ({type: TOGGLE_IS_FETCHING, isFetching});\r\n\r\ntype ToggleFollowingProgressActionType = {\r\n\ttype: typeof TOGGLE_IS_FOLLOWING_PROGRESS,\r\n\tisFetching: boolean,\r\n\tuserId: number\r\n}\r\nexport const toggleFollowingProgress = (isFetching: boolean, userId: number):ToggleFollowingProgressActionType => ({type: TOGGLE_IS_FOLLOWING_PROGRESS, isFetching, userId});\r\n\r\nexport const requestUsers = (page: number, pageSize: number) => {\r\n\treturn async (dispatch: any) => {\r\n\t\t\r\n\t\tdispatch(setCurrentPage(page));\r\n\t\tdispatch(toggleIsFetching(true));\r\n\t\t\r\n\t\tlet data = await usersApi.getUsers(page, pageSize);\r\n\t\tdispatch(toggleIsFetching(false));\r\n\t\tdispatch(setUsers(data.items));\r\n\t\tdispatch(setTotalUsersCount(data.totalCount));\r\n\t}\r\n};\r\n\r\nconst followUnfollowFlow = async (dispatch: any, userId: number, apiMethod: any, actionCreator: any) => {\r\n\tdispatch(toggleFollowingProgress(true, userId));\r\n\tlet data = await apiMethod(userId);\r\n\t\r\n\tif (data.resultCode === 0) {\r\n\t\tdispatch(actionCreator(userId));\r\n\t}\r\n\tdispatch(toggleFollowingProgress(false, userId));\r\n};\r\n\r\nexport const follow = (userId: number) => {\r\n\treturn async (dispatch: any) => {\r\n\t\tawait followUnfollowFlow(dispatch, userId, usersApi.follow.bind(userId), followSuccess);\r\n\t}\r\n};\r\n\r\nexport const unfollow = (userId: number) => {\r\n\treturn async (dispatch: any) => {\r\n\t\tawait followUnfollowFlow(dispatch, userId, usersApi.unfollow.bind(userId), unfollowSuccess);\r\n\t}\r\n};\r\n\r\n\r\nexport default usersReducer;","import React, {useState} from \"react\";\r\nimport s from \"./Paginator.module.css\";\r\nimport cn from \"classnames\";\r\n\r\nlet Paginator = ({currentPage, totalItemsCount, pageSize, onPageChanged, portionSize = 10}) => {\r\n\t\r\n\tlet pagesCount = Math.ceil(totalItemsCount / pageSize);\r\n\t\r\n\tlet pages = [];\r\n\tfor (let i = 1; i <= pagesCount; i++) {\r\n\t\tpages.push(i);\r\n\t}\r\n\t\r\n\tlet portionCount = Math.ceil(pagesCount / portionSize);\r\n\tlet [portionNumber, setPortionNumber] = useState(1);\r\n\tlet leftPortionPageNumber = (portionNumber - 1) * portionSize +1;\r\n\tlet rightPortionNumber = portionNumber * portionSize;\r\n\tdebugger;\r\n\treturn (\r\n\t  <div className={s.paginator}>\r\n\t\t  {portionNumber > 1 &&\r\n\t\t  <span>\r\n\t\t\t  <button className={s.begEnd} onClick={() => {\r\n\t\t\t  \tsetPortionNumber(1);\r\n\t\t\t\t  onPageChanged(1);\r\n\t\t\t  }}>begin</button>\r\n\t\t\t  <button onClick={() => {\r\n\t\t\t  \tsetPortionNumber(portionNumber - 1);\r\n\t\t\t  \tonPageChanged(leftPortionPageNumber - portionSize);\r\n\t\t\t  }}>&#8592;</button>\r\n\t\t  </span>}\r\n\t\t  \r\n\t\t  {pages\r\n\t\t  .filter(p => p >= leftPortionPageNumber && p <= rightPortionNumber)\r\n\t\t  .map(p => {\r\n\t\t\t  return <span className={ cn ({\r\n\t\t\t\t  [s.selectedPage] : currentPage === p\r\n\t\t\t  }, s.pageNumber) }\r\n\t\t\t\t\t\t\t\tkey={p.id}\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\tonPageChanged(p);\r\n\t\t\t\t\t\t\t\t}}>{p}</span>\r\n\t\t  })}\r\n\t\t  \r\n\t\t  {portionCount > portionNumber &&\r\n\t\t  <span>\r\n\t\t\t  <button onClick={() => {\r\n\t\t\t\t  setPortionNumber(portionNumber + 1);\r\n\t\t\t\t  onPageChanged(rightPortionNumber + 1);\r\n\t\t\t  } }>&#8594;</button>\r\n\t\t\t  <button className={s.begEnd} onClick={() => {\r\n\t\t\t  \tsetPortionNumber(portionCount);\r\n\t\t\t  \tonPageChanged(pagesCount);\r\n\t\t\t  }}>end</button>\r\n\t\t\t </span>}\r\n\t  </div>\r\n\t)\r\n};\r\n\r\nexport default Paginator;\r\n","import React from \"react\";\r\nimport s from \"./Users.module.css\";\r\nimport userPhoto from \"../../assets/img/userphoto.png\";\r\nimport {NavLink} from \"react-router-dom\"\r\n\r\n\r\nlet User = ({user, followingInProgress, unfollow, follow}) => {\r\n\treturn (\r\n\t  <div className={s.userItem}>\r\n\t\t  <div className={s.user}>\r\n\t\t\t  <div className={s.ava}>\r\n\t\t\t\t  <NavLink to={'/profile/' + user.id}>\r\n\t\t\t\t\t  <img src={user.photos.small !== null ? user.photos.small : userPhoto} alt={'Avatar'}/>\r\n\t\t\t\t  </NavLink>\r\n\t\t\t  </div>\r\n\t\t\t  <div>\r\n\t\t\t\t  {user.followed\r\n\t\t\t\t\t ? <button disabled={followingInProgress.some(id => id === user.id)}\r\n\t\t\t\t\t\t\t\t  onClick={() => {\r\n\t\t\t\t\t\t\t\t\t  unfollow(user.id);\r\n\t\t\t\t\t\t\t\t  }}>\r\n\t\t\t\t\t\t Unfollow</button>\r\n\t\t\t\t\t \r\n\t\t\t\t\t : <button disabled={followingInProgress.some(id => id === user.id)}\r\n\t\t\t\t\t\t\t\t  onClick={() => {\r\n\t\t\t\t\t\t\t\t\t  follow(user.id);\r\n\t\t\t\t\t\t\t\t  }}>\r\n\t\t\t\t\t\t Follow</button>}\r\n\t\t\t  </div>\r\n\t\t  </div>\r\n\t\t  <div className={s.userInfo}>\r\n\t\t\t  <div className={s.name}>\r\n\t\t\t\t  <div className={s.fullName}>{user.name}</div>\r\n\t\t\t\t  <div className={s.status}>{user.status}</div>\r\n\t\t\t  </div>\r\n\t\t\t  <div className={s.location}>\r\n\t\t\t\t  <div>{\"user.location.country\"},</div>\r\n\t\t\t\t  <div className={s.city}>{\"user.location.city\"}</div>\r\n\t\t\t  </div>\r\n\t\t  </div>\r\n\t  </div>\r\n\t)\r\n};\r\n\r\nexport default User;","import React from \"react\";\r\nimport s from \"./Users.module.css\";\r\nimport Paginator from \"../common/Paginator/Paginator\";\r\nimport User from \"./User\";\r\n\r\nlet Users = ({currentPage, totalUsersCount, pageSize, onPageChanged, ...props}) => {\r\n\treturn (\r\n\t  <div className={s.usersPage}>\r\n\t\t  <Paginator currentPage={currentPage} totalItemsCount={totalUsersCount}\r\n\t\t\t\t\t\t onPageChanged={onPageChanged} pageSize={pageSize}/>\r\n\t\t  <div>\r\n\t\t\t  {props.users.map(u => <User user={u}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfollowingInProgress={props.followingInProgress}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tunfollow={props.unfollow}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfollow={props.follow}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={u.id}\r\n\t\t\t\t />\r\n\t\t\t  )}\r\n\t\t  </div>\r\n\t  </div>\r\n\t)\r\n};\r\n\r\nexport default Users;","\r\nexport const getUsers = (state) => {\r\n\treturn state.usersPage.users;\r\n};\r\n\r\nexport const getPageSize = (state) => {\r\n\treturn state.usersPage.pageSize;\r\n};\r\n\r\nexport const getTotalUsersCount = (state) => {\r\n\treturn state.usersPage.totalUsersCount;\r\n};\r\n\r\nexport const getCurrentPage = (state) => {\r\n\treturn state.usersPage.currentPage;\r\n};\r\n\r\nexport const getIsFetching = (state) => {\r\n\treturn state.usersPage.isFetching;\r\n};\r\n\r\nexport const getFollowingInProgress = (state) => {\r\n\treturn state.usersPage.followingInProgress;\r\n};\r\n\r\n","import React from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {\r\n\tfollow,\r\n\tunfollow,\r\n\tsetCurrentPage,\r\n\trequestUsers\r\n} from \"../../redux/users-reducer\";\r\nimport Users from \"./Users\";\r\nimport Preloader from \"../common/Preloader/Preloader\";\r\nimport {compose} from \"redux\";\r\nimport {\r\n\tgetCurrentPage,\r\n\tgetFollowingInProgress,\r\n\tgetIsFetching,\r\n\tgetPageSize,\r\n\tgetTotalUsersCount,\r\n\tgetUsers\r\n} from \"../../redux/users-selectors\";\r\n\r\nclass UsersContainer extends React.Component {\r\n\tcomponentDidMount() {\r\n\t\tlet {currentPage, pageSize} = this.props;\r\n\t\tthis.props.requestUsers(currentPage, pageSize);\r\n\t}\r\n\t\r\n\tonPageChanged = (pageNumber) => {\r\n\t\tlet {pageSize} = this.props;\r\n\t\tthis.props.requestUsers(pageNumber, pageSize);\r\n\t};\r\n\t\r\n\trender() {\r\n\t\treturn <>\r\n\t\t\t{this.props.isFetching ? <Preloader/> : null}\r\n\t\t\t<Users totalUsersCount={this.props.totalUsersCount}\r\n\t\t\t\t\t pageSize={this.props.pageSize}\r\n\t\t\t\t\t currentPage={this.props.currentPage}\r\n\t\t\t\t\t onPageChanged={this.onPageChanged}\r\n\t\t\t\t\t users={this.props.users}\r\n\t\t\t\t\t follow={this.props.follow}\r\n\t\t\t\t\t unfollow={this.props.unfollow}\r\n\t\t\t\t\t followingInProgress={this.props.followingInProgress}\r\n\t\t\t/>\r\n\t\t</>\r\n\t}\r\n}\r\n\r\n// let mapStateToProps = (state) => {\r\n// \treturn {\r\n// \t\tusers: state.usersPage.users,\r\n// \t\tpageSize: state.usersPage.pageSize,\r\n// \t\ttotalUsersCount: state.usersPage.totalUsersCount,\r\n// \t\tcurrentPage: state.usersPage.currentPage,\r\n// \t\tisFetching: state.usersPage.isFetching,\r\n// \t\tfollowingInProgress:state.usersPage.followingInProgress\r\n// \t}\r\n// };\r\n\r\nlet mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tusers: getUsers(state),\r\n\t\tpageSize: getPageSize(state),\r\n\t\ttotalUsersCount: getTotalUsersCount(state),\r\n\t\tcurrentPage: getCurrentPage(state),\r\n\t\tisFetching: getIsFetching(state),\r\n\t\tfollowingInProgress: getFollowingInProgress(state)\r\n\t}\r\n};\r\n\r\n\r\nexport default compose(\r\n  connect(mapStateToProps, {setCurrentPage, follow, unfollow, requestUsers}),\r\n) (UsersContainer);","import React from \"react\";\r\nimport s from './Header.module.css';\r\nimport {NavLink} from \"react-router-dom\";\r\nimport logo from \"../../assets/img/logo192.png\"\r\n\r\nfunction Header(props) {\r\n\treturn (\r\n\t  <div className={s.header}>\r\n\t\t  <div className={s.logo}><img src={logo} alt='logo'/></div>\r\n\t\t  <div className={s.loginBlock}>\r\n\t\t\t  {props.isAuth\r\n\t\t\t\t ? <div>\r\n\t\t\t\t\t <div className={s.login}>\r\n\t\t\t\t\t\t {props.login}\r\n\t\t\t\t\t\t <button onClick={props.logout}>Log out</button>\r\n\t\t\t\t\t </div>\r\n\t\t\t\t \t</div>\r\n\t\t\t\t : <NavLink to={'/login'}><button className={s.loginBtn}>Login</button></NavLink>}\r\n\t\t  </div>\r\n\t  </div>\r\n\t);\r\n}\r\n\r\nexport default Header;","import React from \"react\";\r\nimport Header from \"./Header\";\r\nimport {connect} from \"react-redux\";\r\nimport {logout} from \"../../redux/auth-reducer\";\r\n\r\nclass HeaderContainer extends React.Component{\r\n\trender() {\r\n\t\treturn <Header {...this.props}/>\r\n\t}\r\n}\r\n\r\nlet mpStateToProps = (state) => ({\r\n\tisAuth: state.auth.isAuth,\r\n\tlogin: state.auth.login,\r\n});\r\n\r\n\r\nexport default connect(mpStateToProps, {logout}) (HeaderContainer);","import {getAuthUserData} from \"./auth-reducer\";\r\n\r\nconst INITIALIZED_SUCCESS = 'INITIALIZED_SUCCESS';\r\n\r\nexport type InitialStateType = {\r\n\tinitialized: boolean\r\n}\r\n\r\nlet initialState:InitialStateType = {\r\n\tinitialized: false,\r\n};\r\n\r\n\r\nconst appReducer = (state = initialState, action: any): InitialStateType => {\r\n\tswitch (action.type) {\r\n\t\tcase INITIALIZED_SUCCESS:\r\n\t\t\treturn  {\r\n\t\t\t\t...state,\r\n\t\t\t\tinitialized: true\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n\r\nexport type InitializedSuccessType = {\r\n\ttype: typeof INITIALIZED_SUCCESS // \"INITIALIZED_SUCCESS\"\r\n}\r\n\r\nexport const initializedSuccess = (): InitializedSuccessType => ({type: INITIALIZED_SUCCESS});\r\n\r\nexport const initializeApp = () => (dispatch: any) => {\r\n\tlet promise = dispatch(getAuthUserData());\r\n\tPromise.all([promise])                           //если мгого промсов перед диспатчем\r\n\t.then( () => {\r\n\t\tdispatch(initializedSuccess());\r\n\t});\r\n};\r\n\r\n\r\n\r\n\r\nexport default appReducer;","let initialState = {\r\n\t// friends: [\r\n\t// \t{id: 1, name: 'Alex', ava: '4'},\r\n\t// \t{id: 2, name: 'Sveta', ava: '5'},\r\n\t// \t{id: 3, name: 'Valera', ava: '6'}\r\n\t// ]\r\n};\r\n\r\ntype InitialState = typeof initialState;\r\n\r\nconst navbarReducer = (state = initialState, action: any):InitialState => {\r\n\treturn state;\r\n};\r\n\r\nexport default navbarReducer;","import {applyMiddleware, combineReducers, compose, createStore} from \"redux\";\r\nimport profileReducer from \"./profile-reducer\";\r\nimport dialogsReducer from \"./dialogs-reducer\";\r\nimport navbarReducer from \"./navbar-reducer\";\r\nimport usersReducer from \"./users-reducer\";\r\nimport authReducer from \"./auth-reducer\";\r\nimport thunkMiddleware from \"redux-thunk\";\r\nimport {reducer as formReducer} from \"redux-form\";\r\nimport appReducer from \"./app-reducer\";\r\n\r\nlet reducers = combineReducers({\r\n\tprofilePage: profileReducer,\r\n\tdialogsPage: dialogsReducer,\r\n\tnavbar: navbarReducer,\r\n\tusersPage: usersReducer,\r\n\tauth: authReducer,\r\n\tapp: appReducer,\r\n\tform: formReducer\r\n});\r\n\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(reducers, composeEnhancers(applyMiddleware(thunkMiddleware)));\r\n\r\nwindow.__store__ = store;\r\n\r\nexport default store;","import React, {Suspense} from \"react\";\r\nimport Preloader from \"../components/common/Preloader/Preloader\";\r\n\r\n\r\nexport const WithSuspense = (Component) => {\r\n\t\r\n\treturn (props) => {\r\n\t\treturn <Suspense fallback={<Preloader/>} >\r\n\t\t\t<Component {...props} />\r\n\t\t</Suspense>\r\n\t}\r\n};\r\n","import React, {Component} from 'react';\r\nimport {HashRouter, BrowserRouter, Route, withRouter, Switch, Redirect} from \"react-router-dom\";\r\nimport './App.css';\r\nimport Navbar from \"./components/Navbar/Navbar\";\r\nimport News from \"./components/News/News\";\r\nimport Music from \"./components/Music/Music\";\r\nimport Settings from \"./components/Settings/Settings\";\r\nimport Login from \"./components/Login/Login\";\r\nimport UsersContainer from \"./components/Users/UsersContainer\";\r\nimport HeaderContainer from \"./components/Header/HeaderContainer\";\r\nimport {connect, Provider} from \"react-redux\";\r\nimport {initializeApp} from \"./redux/app-reducer\";\r\nimport {compose} from \"redux\";\r\nimport Preloader from \"./components/common/Preloader/Preloader\";\r\nimport store from \"./redux/redux-store\";\r\nimport {WithSuspense} from \"./hoc/WithSuspense\";\r\n\r\nconst DialogsContainer = React.lazy(() => import(\"./components/Dialogs/DialogsContainer\"));\r\nconst ProfileContainer = React.lazy(() => import(\"./components/Profile/ProfileContainer\"));\r\n\r\n\r\nclass App extends Component {\r\n\tcatchAllUnhandleErrors = (promiseRejectionEvent, promise) => {\r\n\t\talert(promiseRejectionEvent);\r\n\t};\r\n\t\r\n\tcomponentDidMount() {\r\n\t\tthis.props.initializeApp();\r\n\t\twindow.addEventListener(\"unhandlerejection\", this.catchAllUnhandleErrors);\r\n\t}\r\n\t\r\n\tcomponentWillUnmount() {\r\n\t\twindow.removeEventListener(\"unhandlerejection\", this.catchAllUnhandleErrors);\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tif (!this.props.initialized) {\r\n\t\t\treturn <Preloader/>\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\t\t  <div className='app-wrapper'>\r\n\t\t\t  <HeaderContainer/>\r\n\t\t\t  <Navbar/>\r\n\t\t\t  <div className='app-wrapper-content'>\r\n\t\t\t\t  <Switch>\r\n\t\t\t\t\t  <Route exact path='/'\r\n\t\t\t\t\t\t\t\trender={ () => <Redirect to={\"/profile\"} />}/>\r\n\t\t\t\t\t  \r\n\t\t\t\t\t  <Route path='/profile/:userId?'\r\n\t\t\t\t\t\t\t\trender={WithSuspense(ProfileContainer)}/>\r\n\t\t\t\t\t\r\n\t\t\t\t\t  <Route path='/dialogs'\r\n\t\t\t\t\t\t\t\trender={WithSuspense(DialogsContainer)}/>\r\n\t\t\t\t\t\r\n\t\t\t\t\t  <Route path='/users'\r\n\t\t\t\t\t\t\t\trender={() => <UsersContainer/>}/>\r\n\t\t\t\t\t\r\n\t\t\t\t\t  <Route path='/news'\r\n\t\t\t\t\t\t\t\tcomponent={News}/>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t  <Route path='/music'\r\n\t\t\t\t\t\t\t\tcomponent={Music}/>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t  <Route path='/settings'\r\n\t\t\t\t\t\t\t\tcomponent={Settings}/>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t  <Route path='/login'\r\n\t\t\t\t\t\t\t\trender={() => <Login/>}/>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t  <Route path='*'\r\n\t\t\t\t\t\t\t\trender={() => <div>404 NOT FOUND</div>}/>\r\n\t\t\t\t  </Switch>\r\n\t\t\t  </div>\r\n\t\t  </div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tinitialized: state.app.initialized\r\n});\r\n\r\nlet AppContainer = compose(\r\n  withRouter,\r\n  connect (mapStateToProps, {initializeApp})) (App);\r\n\r\nconst MainApp = (props) => {\r\n\treturn (\r\n\t  <HashRouter>\r\n\t\t  <Provider store={store}>\r\n\t\t\t  <AppContainer />\r\n\t\t  </Provider>\r\n\t  </HashRouter>\r\n\t)\r\n};\r\n\r\nexport default MainApp;","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport MainApp from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\n\r\nReactDOM.render(<MainApp />, document.getElementById('root'));\r\n\r\nserviceWorker.unregister();\r\n\r\n\r\n\r\n\r\n\r\n","import React from \"react\";\r\nimport s from \"./FormsControls.module.css\";\r\nimport {Field} from \"redux-form\";\r\n\r\n\r\nconst FormControl = ({input, meta: {touched, error}, children}) => {\r\n\tconst hasError = touched && error;\r\n\treturn (\r\n\t  <div className={s.formControl + \" \" + (hasError ? s.error : \" \")}>\r\n\t\t  {children}\r\n\t\t  {hasError && <span>{error}</span>}\r\n\t  </div>\r\n\t)\r\n};\r\n\r\nexport const Textarea = (props) => {\r\n\tconst {input, meta, children, ...restProps } = props;\r\n\treturn <FormControl {...props} > <textarea  {...input} {...restProps} /></FormControl>\r\n};\r\n\r\nexport const Input = (props) => {\r\n\tconst {input, meta, children, ...restProps } = props;\r\n\treturn <FormControl {...props} > <input  {...input} {...restProps} /></FormControl>\r\n};\r\n\r\nexport const createField = (placeholder, name, validators, component, type = \"text\", text, props ={}) => (\r\n  <div>\r\n\t  <Field placeholder={placeholder} name={name}\r\n\t\t\t\tvalidate={validators}\r\n\t\t\t\tcomponent={component} type={type}\r\n\t\t\t\t {...props}\r\n\t  />\r\n  </div>\r\n);\r\n\r\n\r\n","import React from \"react\";\r\nimport preloader from \"../../../assets/img/3.gif\";\r\nimport s from \"./Preloader.module.css\";\r\n\r\nlet Preloader = (props) => {\r\n\treturn (\r\n\t  <div className={s.preloader}>\r\n\t\t  <img src={preloader} alt={\"preloader\"}/>\r\n\t  </div>\r\n\t)\r\n};\r\n\r\nexport default Preloader;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"paginator\":\"Paginator_paginator__3uhmt\",\"pageNumber\":\"Paginator_pageNumber__2S7WC\",\"selectedPage\":\"Paginator_selectedPage__39uB7\",\"begEnd\":\"Paginator_begEnd__rUGRx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__j6-Td\",\"logo\":\"Header_logo__1DL_C\",\"loginBlock\":\"Header_loginBlock__1Wf9O\",\"login\":\"Header_login__3S1R9\",\"loginBtn\":\"Header_loginBtn__3c6_G\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormsControls_formControl__2Xepa\",\"error\":\"FormsControls_error__2s21E\",\"formSummeryError\":\"FormsControls_formSummeryError__37kkS\"};","\r\nexport const required = value => {\r\n\tif(value) return undefined;\r\n\t\r\n\treturn \"Field is required\"\r\n };\r\n\r\nexport const maxLengthCreator = (maxLength) => (value) => {\r\n\tif(value.length > maxLength) return `Max length is ${maxLength} symbols`;\r\n\treturn undefined;\r\n };","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"Login_login__2y64v\",\"loginForm\":\"Login_loginForm__27jlp\"};","module.exports = __webpack_public_path__ + \"static/media/userphoto.1c997e59.png\";","import {profileApi, usersApi} from \"../api/api\";\r\nimport {stopSubmit} from \"redux-form\";\r\nimport {PhotosType, PostType, ProfileType} from \"../Types/types\";\r\n\r\nconst ADD_POST = 'ADD-POST';\r\nconst SET_USER_PROFILE = 'SET_USER_PROFILE';\r\nconst SET_STATUS = 'SET_STATUS';\r\nconst DELETE_POST = 'DELETE_POST';\r\nconst SAVE_PHOTO_SUCCESS = 'SAVE_PHOTO_SUCCESS';\r\nconst SAVE_PROFILE_SUCCESS = 'SAVE_PROFILE_SUCCESS';\r\n\r\n\r\nlet initialState = {\r\n\tposts: [\r\n\t\t{id: 3, likesCounts: 15, message: 'Hi! How ara you?'},\r\n\t\t{id: 2, likesCounts: 20, message: 'It\\'s my first post. It\\'s my first post .It\\'s my first post .It\\'s my first post . It\\'s my first post. It\\'s my first post. It\\'s my first post. It\\'s my first post. It\\'s my first post. It\\'s my first post. It\\'s my first post. It\\'s my first post. It\\'s my first post. It\\'s my first post. It\\'s my first post. It\\'s my first post. It\\'s my first post. It\\'s my first post. It\\'s my first post. It\\'s my first post. It\\'s my first post. It\\'s my first post'},\r\n\t\t{id: 1, likesCounts: 1, message: 'Yooo, man!'},\r\n\t] as Array<PostType>,\r\n\tprofile: null as ProfileType | null,\r\n\tstatus: '',\r\n\tnewPostText: ''\r\n};\r\n\r\nexport type InitialStateType = typeof  initialState;\r\n\r\nconst profileReducer = (state = initialState, action: any): InitialStateType => {\r\n\tswitch (action.type) {\r\n\t\tcase ADD_POST: {\r\n\t\t\tlet newPost = {\r\n\t\t\t\tid: state.posts[0].id + 1,\r\n\t\t\t\tlikesCounts: 0,\r\n\t\t\t\tmessage: action.newPostText\r\n\t\t\t};\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tposts: [newPost, ...state.posts]\r\n\t\t\t}\r\n\t\t}\r\n\t\tcase SET_STATUS: {\r\n\t\t\treturn {\r\n\t\t\t\t...state, status: action.status\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase SET_USER_PROFILE: {\r\n\t\t\treturn {\r\n\t\t\t\t...state, profile: action.profile\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase DELETE_POST: {\r\n\t\t\treturn {\r\n\t\t\t\t...state, posts: state.posts.filter(p => p.id !== action.postId)\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase SAVE_PHOTO_SUCCESS: {\r\n\t\t\treturn {\r\n\t\t\t\t...state, profile: {...state.profile, photos: action.photos} as ProfileType\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase SAVE_PROFILE_SUCCESS: {\r\n\t\t\treturn {\r\n\t\t\t\t...state, profile: action.profile\r\n\t\t\t};\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n\r\n\r\ntype AddPostActionCreatorActionType = {\r\n\ttype: typeof ADD_POST,\r\n\tnewPostText: string\r\n}\r\nexport const addPostActionCreator = (newPostText: string):AddPostActionCreatorActionType => ({type: ADD_POST, newPostText});\r\n\r\ntype SetUserProfileActionType = {\r\n\ttype: typeof SET_USER_PROFILE,\r\n\tprofile: ProfileType\r\n}\r\nexport const setUserProfile = (profile: ProfileType): SetUserProfileActionType => ({type: SET_USER_PROFILE, profile}) ;\r\n\r\ntype SetStatusActionType = {\r\n\ttype: typeof SET_STATUS,\r\n\tstatus: string\r\n}\r\nexport const setStatus = (status: string):SetStatusActionType => ({type: SET_STATUS, status}) ;\r\n\r\ntype DeletePostActionType = {\r\n\ttype: typeof DELETE_POST,\r\n\tpostId: number\r\n}\r\nexport const deletePost = (postId: number):DeletePostActionType => ({type: DELETE_POST, postId}) ;\r\n\r\ntype SavePhotoSuccessActionType = {\r\n\ttype: typeof SAVE_PHOTO_SUCCESS,\r\n\tphotos: PhotosType\r\n}\r\nexport const savePhotoSuccess = (photos: PhotosType): SavePhotoSuccessActionType => ({type: SAVE_PHOTO_SUCCESS, photos}) ;\r\n\r\nexport const getUserProfile = (userId: number) => async (dispatch: any) => {\r\n\tconst data = await usersApi.getProfile(userId);\r\n\tdispatch(setUserProfile(data));\r\n};\r\n\r\nexport const getStatus = (userId: number) => async (dispatch: any) => {\r\n\tconst response = await profileApi.getStatus(userId);\r\n\tdispatch(setStatus(response.data));\r\n};\r\n\r\nexport const updateStatus = (status: string) => async (dispatch: any) => {\r\n\tconst response = await profileApi.updateStatus(status);\r\n\t\r\n\tif (response.data.resultCode === 0) {\r\n\t\tdispatch(setStatus(status));\r\n\t}\r\n};\r\n\r\nexport const savePhoto = (file: any) => async (dispatch: any) => {\r\n\tconst response = await profileApi.savePhoto(file);\r\n\t\r\n\tif (response.data.resultCode === 0) {\r\n\t\tdispatch(savePhotoSuccess(response.data.data.photos.large));\r\n\t}\r\n};\r\n\r\nexport const saveProfile = (profile: ProfileType) => async (dispatch: any, getState: any) => {\r\n\tconst userId = getState().auth.userId;\r\n\tconst response = await profileApi.saveProfile(profile);\r\n\t\r\n\tif (response.data.resultCode === 0) {\r\n\t\tdispatch(getUserProfile(userId));\r\n\t} else {\r\n\t\tlet message = response.data.messages.length > 0 ? response.data.messages[0] : \"Some error\";\r\n\t\tlet contact = message\r\n\t\t.slice(\r\n\t\t  message.indexOf(\">\") + 1,\r\n\t\t  message.indexOf(\")\")\r\n\t\t)\r\n\t\t.toLocaleLowerCase();\r\n\t\tdispatch(stopSubmit(\"editProfile\", {\"contacts\": {[contact]:  message}}));\r\n\t\treturn Promise.reject( message);\r\n\t}\r\n};\r\n\r\nexport default profileReducer;\r\n\r\n"],"sourceRoot":""}